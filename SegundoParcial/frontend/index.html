<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>ReViews - Examen</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
</head>
<body>
    <div class="container">
        <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:20px;">
            <h1>‚≠ê ReViews</h1>
            <button onclick="logout()" style="background:red;">Salir</button>
        </div>

        <div class="form-box">
            <h3>Nueva Rese√±a</h3>
            <input type="text" id="nombre" placeholder="Nombre Establecimiento (Ej: Casa Lola)" required>
            
            <div style="display:flex; gap:5px;">
                <input type="text" id="direccion" placeholder="Direcci√≥n Postal (Ej: Calle Larios, M√°laga)">
                <button onclick="geocodificar()" style="background:#17a2b8;">üìç Buscar Coordenadas</button>
            </div>
            <div style="display:flex; gap:5px; margin-top:5px;">
                <input type="text" id="lat" placeholder="Lat" readonly>
                <input type="text" id="lng" placeholder="Lng" readonly>
            </div>

            <label style="margin-top:10px; display:block;">Valoraci√≥n (0-5):</label>
            <select id="valoracion">
                <option value="5">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê (5)</option>
                <option value="4">‚≠ê‚≠ê‚≠ê‚≠ê (4)</option>
                <option value="3">‚≠ê‚≠ê‚≠ê (3)</option>
                <option value="2">‚≠ê‚≠ê (2)</option>
                <option value="1">‚≠ê (1)</option>
                <option value="0">üí© (0)</option>
            </select>

            <label style="margin-top:10px; display:block;">Foto del sitio:</label>
            <input type="file" id="imagen">

            <button onclick="guardarResena()" style="margin-top:15px; width:100%;">Publicar Rese√±a</button>
        </div>

        <hr>

        <h3>Mapa de Rese√±as</h3>
        <div style="display:flex; gap:5px; margin-bottom:10px;">
            <input type="text" id="buscarMapa" placeholder="Centrar mapa en direcci√≥n...">
            <button onclick="centrarMapa()" style="background:#ffc107; color:black;">üîç Ir</button>
        </div>
        <div id="map" style="height: 300px; border-radius:8px; margin-bottom:20px;"></div>

        <h3>√öltimas Rese√±as</h3>
        <div id="lista-resenas">Cargando...</div>
    </div>

    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script src="app.js"></script>
    <script>
        window.onload = function() {
            // Protecci√≥n Auth
            if(!localStorage.getItem('token')) window.location.href = 'login.html';
            
            initMap();
            cargarResenas();
        };
    </script>
</body>
</html>